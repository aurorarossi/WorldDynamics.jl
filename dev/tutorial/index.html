<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>WorldDynamics tutorial · WorldDynamics.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="WorldDynamics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">WorldDynamics.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>WorldDynamics tutorial</a><ul class="internal"><li><a class="tocitem" href="#Replicating-historical-runs"><span>Replicating historical runs</span></a></li><li><a class="tocitem" href="#Replicating-the-reference-behaviour"><span>Replicating the reference behaviour</span></a></li><li><a class="tocitem" href="#Replicating-the-sensitivity-tests"><span>Replicating the sensitivity tests</span></a></li></ul></li><li><a class="tocitem" href="../world3/">World 3 equations, variables, and parameters</a></li><li><a class="tocitem" href="../source/">Source code documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>WorldDynamics tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>WorldDynamics tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/natema/WorldDynamics.jl/blob/main/docs/src/tutorial.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="A-WorldDynamics-tutorial"><a class="docs-heading-anchor" href="#A-WorldDynamics-tutorial">A WorldDynamics tutorial</a><a id="A-WorldDynamics-tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#A-WorldDynamics-tutorial" title="Permalink"></a></h1><p><code>WorldDynamics</code> allows the user to <em>play</em> with the World3 model introduced in the book <em>Dynamics of Growth in a Finite World</em> (1974). Informally speaking, this model is formed by five systems, each containg one or more subsystems. The following picture shows the structure of the model and the connections between the subsystems which share a common variable.</p><p><img src="../img/world3.png" alt="The World3 model"/></p><p>As it can be seen, the five systems are <code>Pop4</code> (which is the population system with four age levels), <code>Agriculture</code>, <code>Capital</code>, <code>Non-renewable</code> (resources), and <code>Pollution</code>. The <code>Pop4</code> system is formed by the three subsystems <code>pop</code> (population), <code>br</code> (birth rate), and <code>dr</code> (death rate). For instance, the subsystem <code>br</code> uses the variable <code>pop</code> which originates from the subsystem <code>pop</code>, while the subsystem <code>pop</code> uses the variable <code>le</code> which originates from the subsystem <code>dr</code>. Of course, there are variables which connect subsystem of different systems. For example, the subsystem <code>pp</code> of the system <code>Pollution</code> uses the variable <code>aiph</code> which originates from the subsystem <code>ai</code> of the system <code>Agriculture</code> (for an entire list of variables and of subsystems using them see the <a href="../world3/#eqs_vars_pars">World 3 equations, variables, and parameters</a> page).</p><p>In <code>WorldDynamics</code> each system is a Julia module and each subsystem correspond to a Julia function of this module (or of a module which is included in this module), which defines the ODE system corresponding to the subsystem itself. All the ODE systems corresponding to the subsystems of the World3 model have to be composed (see the function <code>compose</code> in the <code>solvesystems.jl</code> code file). This will produce the entire ODE system of the World3 model, which can then be solved by using the function <code>solve</code> in the <code>solvesystems.jl</code> code file.</p><p>Let us now see how we can replicate the runs described in Chapter 7 of the above mentioned book. </p><h2 id="Replicating-historical-runs"><a class="docs-heading-anchor" href="#Replicating-historical-runs">Replicating historical runs</a><a id="Replicating-historical-runs-1"></a><a class="docs-heading-anchor-permalink" href="#Replicating-historical-runs" title="Permalink"></a></h2><p>We first have to solve the World3 ODE system, which is constructed in the <code>world3_historicalrun</code> function, included in the <code>world3_historicalrun.jl</code> code file.</p><pre><code class="nohighlight hljs">using WorldDynamics
include(&quot;examples/scenarios/world3_historicalrun.jl&quot;)
system = world3_historicalrun()
sol = WorldDynamics.solve(system, (1900, 2100))</code></pre><p>We then have to define the variables that we want to plot. For example, Figure 7-2 of the above book shows the plot of eleven variables in the population system of the model. In order to easily access to these variables, we first create shortcuts to the subsystems in which they are introduced.</p><pre><code class="nohighlight hljs">@named pop = WorldDynamics.World3.Pop4.population()
@named br = WorldDynamics.World3.Pop4.birth_rate()
@named dr = WorldDynamics.World3.Pop4.death_rate()</code></pre><p>The eleven variables are then defined as follows.</p><pre><code class="nohighlight hljs">fig_7_2_variables = [
    (pop.pop, 0, 4e9, &quot;pop&quot;),
    (br.cbr, 0, 50, &quot;cbr&quot;),
    (dr.cdr, 0, 50, &quot;cdr&quot;),
    (dr.le, 0, 60, &quot;le&quot;),
    (dr.lmf, 0.75, 1.75, &quot;lmf&quot;),
    (dr.lmp, 0.75, 1.75, &quot;lmp&quot;),
    (dr.lmhs, 0.75, 1.75, &quot;lmhs&quot;),
    (dr.lmc, 0.75, 1.75, &quot;lmc&quot;),
    (br.tf, 0, 8, &quot;tf&quot;),
    (br.dtf, 0, 8, &quot;dtf&quot;),
]
@variables t</code></pre><p>For each variable of the model, the above vector includes a quadruple, containing the Julia variable, its range, and its symbolic name to be shown in the plot (the range and the symbolic name are optional). The time variable <code>t</code> has also to be declared.</p><p>Finally, we can plot the evolution of the model variables according to the previously computed solution.</p><pre><code class="nohighlight hljs">plotvariables(sol, (t, 1900, 1970), fig_7_2_variables, name=&quot;Fig. 7-2&quot;, showlegend=true, colored=true)</code></pre><h2 id="Replicating-the-reference-behaviour"><a class="docs-heading-anchor" href="#Replicating-the-reference-behaviour">Replicating the reference behaviour</a><a id="Replicating-the-reference-behaviour-1"></a><a class="docs-heading-anchor-permalink" href="#Replicating-the-reference-behaviour" title="Permalink"></a></h2><p>To replicate the figures in Section 7.3 of the above book, we can operate in a similar way by declaring the varibales to be plot and by changing the time range. For example the following code reproduce the plot of Figure 7-7.</p><pre><code class="nohighlight hljs">@named pop = WorldDynamics.World3.Pop4.population()
@named br = WorldDynamics.World3.Pop4.birth_rate()
@named dr = WorldDynamics.World3.Pop4.death_rate()
@named is = WorldDynamics.World3.Capital.industrial_subsector()
@named ld = WorldDynamics.World3.Agriculture.land_development()
@named nr = WorldDynamics.World3.NonRenewable.non_renewable()
@named pp = WorldDynamics.World3.Pollution.persistent_pollution()
reference_variables = [
    (nr.nrfr, 0, 1, &quot;nrfr&quot;),
    (is.iopc, 0, 1000, &quot;iopc&quot;),
    (ld.fpc, 0, 1000, &quot;fpc&quot;),
    (pop.pop, 0, 16e9, &quot;pop&quot;),
    (pp.ppolx, 0, 32, &quot;ppolx&quot;),
    (br.cbr, 0, 50, &quot;cbr&quot;),
    (dr.cdr, 0, 50, &quot;cdr&quot;),
]
@variables t
plotvariables(sol, (t, 1900, 2100), reference_variables, name=&quot;Fig. 7-7&quot;, showlegend=true, colored=true)</code></pre><h2 id="Replicating-the-sensitivity-tests"><a class="docs-heading-anchor" href="#Replicating-the-sensitivity-tests">Replicating the sensitivity tests</a><a id="Replicating-the-sensitivity-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Replicating-the-sensitivity-tests" title="Permalink"></a></h2><p>In this case, we have to mdoify the parameter or the interpolation table of the varaible with respect to which we want to perform the sensistivity test, we have to solve agian the ODE system, and we can finally plot the resulting evolution of the system.</p><h3 id="Modifying-a-parameter"><a class="docs-heading-anchor" href="#Modifying-a-parameter">Modifying a parameter</a><a id="Modifying-a-parameter-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-a-parameter" title="Permalink"></a></h3><p>In order to reproduce Figure 7-10, in which the nonrenewable resources initial value (that is, the value of the <code>NRI</code> parameter) is doubled, we can modify the value of this parameter by getting the parameter set of the nonrenewable resources sector, and by changing the value of <code>NRI</code>.</p><pre><code class="nohighlight hljs">nonrenewable_parameters_7_10 = WorldDynamics.World3.NonRenewable.getparameters()
nonrenewable_parameters_7_10[:nri] = 2.0 * nonrenewable_parameters_7_10[:nri]</code></pre><p>We then have to solve again the ODE system, by specifying which set of paramer values has to be used for the nonrenewable resources sector.</p><pre><code class="nohighlight hljs">system = world3_historicalrun(nonrenewable_params=nonrenewable_parameters_7_10)
sol = WorldDynamics.solve(system, (1900, 2100))</code></pre><p>Finally, we can plot the seven variables of Figure 7-10.</p><pre><code class="nohighlight hljs">plotvariables(sol, (t, 1900, 2100), reference_variables, name=&quot;Fig. 7-10&quot;, showlegend=true, colored=true)</code></pre><h3 id="Modifying-an-interpolation-table"><a class="docs-heading-anchor" href="#Modifying-an-interpolation-table">Modifying an interpolation table</a><a id="Modifying-an-interpolation-table-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-an-interpolation-table" title="Permalink"></a></h3><p>In order to reproduce Figure 7-13, in which the slope of the fraction of industrial output allocated to agriculture is increased, we can modify the two tables <code>FIOAA1</code> and <code>FIOAA2</code> by getting the table set of the agriculture sector, and by changing the value of these two tables.</p><pre><code class="nohighlight hljs">agriculture_tables_7_13 = WorldDynamics.World3.Agriculture.gettables()
agriculture_tables_7_13[:fioaa1] = (0.5, 0.3, 0.1, 0.0, 0.0, 0.0)
agriculture_tables_7_13[:fioaa2] = (0.5, 0.3, 0.1, 0.0, 0.0, 0.0)</code></pre><p>We then have to solve again the ODE system, by specifying which set of tables has to be used for the agriculture sector.</p><pre><code class="nohighlight hljs">system = world3_historicalrun(agriculture_tables=agriculture_tables_7_13)
sol = WorldDynamics.solve(system, (1900, 2100))</code></pre><p>Finally, we can plot the seven variables of Figure 7-10.</p><pre><code class="nohighlight hljs">plotvariables(sol, (t, 1900, 2100), reference_variables, name=&quot;Fig. 7-13&quot;, showlegend=true, colored=true)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../world3/">World 3 equations, variables, and parameters »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 19 September 2022 13:35">Monday 19 September 2022</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
